# Don't touch this variable
export GO111MODULE := on

gocache_files := $(wildcard *.go)
output_dir := build
output_name := go-exploit-cache

all: format lint compile

format:
	gofmt -d -w $(gocache_files)

lint:
	golangci-lint run --fix $(gocache_files)

compile: exploit

exploit: ext = $(if $(findstring windows,$(exploit_os)),.exe)
exploit:
	go build -o $(output_dir)/$(output_name) $(gocache_files)
clean:
	@rm -rfv $(output_dir)